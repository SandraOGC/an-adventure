'use strict';


const audioCheck = new Audio('audio/check.mp3');
const audiovictoryMusic = new Audio('audio/victoryMusic.mp3');


let objectives = {
  'Reach right edge': 'not accomplished',
  'Reach bottom edge': 'not accomplished'
};

const theEnd = () => {
  document.querySelector('.main__background').style.display = 'block';
  document.querySelector('.main__background').style.backgroundColor = 'black';
  const thankYouH2 = document.createElement('h2');
  thankYouH2.classList.add('victory--theEnd');

  const thankYou = document.createTextNode('Thank you very much for playing it!');
  thankYouH2.append(thankYou);
  document.querySelector('.main__background').append(thankYouH2);

  const authorDIV = document.createElement('div');
  authorDIV.classList.add('authorDIV');

  const authorName = document.createElement('h1');
  const authorAB = document.createTextNode('Anna Branco');
  authorName.append(authorAB);
  authorName.classList.add('authorName');

  const authorTwitter = document.createElement('a');
  authorTwitter.href = 'https://twitter.com/AnyaBranco';
  const authorTwitterIcon = document.createElement('i');
  authorTwitter.classList.add('fab', 'fa-twitter', 'socialIcons');
  authorTwitter.append(authorTwitterIcon);

  const authorFacebook = document.createElement('a');
  authorFacebook.href = 'https://www.facebook.com/anya.branco';
  const authorFacebookIcon = document.createElement('i');
  authorFacebook.classList.add('fab', 'fa-facebook-f', 'socialIcons');
  authorFacebook.append(authorFacebookIcon);

  const authorGithub = document.createElement('a');
  authorGithub.href = 'https://github.com/annabranco';
  const authorGithubIcon = document.createElement('i');
  authorGithub.classList.add('fab', 'fa-github', 'socialIcons');
  authorGithub.append(authorGithubIcon);


  authorDIV.append(authorTwitter, authorFacebook, authorGithub);
  document.querySelector('.main__background').append(authorName, authorDIV);
};

const checkObjectives = () => {

  Object.values(objectives);

  if (Object.values(objectives).filter(objective => objective === 'not accomplished').length === 0) {
    victory();
  }
};

const victory = () => {

  audiovictoryMusic.play();
  document.querySelector('.main__background').style.display = 'block';
  let timeLapseForObjectivesCheck = 0;

  const body = document.querySelector('body');

  const victoryBox = document.createElement('div');
  victoryBox.classList.add('victory--box');
  body.append(victoryBox);

  const victoryTitle = document.createElement('h1');
  victoryTitle.classList.add('victory--title');
  victoryBox.append(victoryTitle);

  const victoryTitleText = document.createTextNode('Victory!');
  victoryTitle.append(victoryTitleText);

  const victoryPar = document.createElement('p');
  victoryPar.classList.add('victory--text');
  victoryTitle.append(victoryPar);

  const victoryImg = document.createElement('img');
  victoryImg.classList.add('victory--img');
  victoryImg.src = 'images/victory1.png';
  victoryBox.append(victoryImg);

  const victoryObjectivesList = document.createElement('ul');
  victoryObjectivesList.classList.add('victory--list');
  const objectiveListText = document.createTextNode('Objectives:');
  victoryObjectivesList.append(objectiveListText);


  victoryBox.append(victoryObjectivesList);


  const allObjectives = Object.keys(objectives);
  for (const eachObjective of allObjectives) {
    const objective = document.createElement('li');
    objective.classList.add('victory--objectives');
    const objectiveText = document.createTextNode(eachObjective);
    objective.append(objectiveText);
    victoryObjectivesList.append(objective);
    timeLapseForObjectivesCheck += 2000;
    setTimeout(function() {
      const check = document.createElement('i');
      check.classList.add('fas', 'fa-check', 'checks');
      objective.append(check);
      audioCheck.play();
    }, timeLapseForObjectivesCheck);
  }

  setTimeout(function() {
    const victoryParText = document.createTextNode('Congratulations! You have accomplished all of your objectives. This is a time for celebration and feasts. Enjoy your triumph while you get ready for your next adventure!');
    victoryPar.append(victoryParText);
  }, timeLapseForObjectivesCheck + 4000);


  setTimeout(function() {
    const finalButton = document.createElement('button');
    finalButton.classList.add('victory--button');
    const finalButtonText = document.createTextNode('I just cannot wait for the next adventure!');
    finalButton.append(finalButtonText);
    victoryBox.append(finalButton);
    finalButton.addEventListener('click', () => {
      victoryBox.remove();
      theEnd();
    });
  }, timeLapseForObjectivesCheck + 15000);
};


setTimeout(function() {
  document.querySelector('.instructions').remove();
}, 10000);

// Icons

// let heroSize = window.innerHeight * 0.1;

'use strict';
/* global dungeon limitRight:true limitBottom:true objectives checkObjectives */

let moveIconDown;
let moveIconUp;
let moveIconRight;
let moveIconLeft;
let currentPositionX;
let currentPositionY;
const audioSteps = new Audio('audio/steps-stone.mp3');
let heroStepSize = 48 + (window.innerHeight * 0.1);

const hero = document.querySelector('.hero');

// Define el tamaño del personaje, de acuerdo con la pantalla, con un mínimo de 48px

if (window.innerHeight * 0.1 > 48) {
  hero.style.transform = `scale(${1 + (window.innerHeight * 0.001)}`;
}

// if (window.innerHeight * 0.1 <= 48) {
//   heroSize = 48;
//   hero.style.height = hero.style.width = '48px';
//   hero.style.backgroundPosition = 'top right -48px';
// } else {
//   heroSize = window.innerHeight * 0.1;
//   hero.style.height = hero.style.width = heroSize + 'px';
//   hero.style.backgroundPosition = `top right - $ {heroSize}px`;
// }

// Define la imagem inicial del personaje
moveIconDown = moveIconUp = moveIconRight = moveIconLeft = 1;

// Define la posición inicial del personaje.
// 5 por los borders top y left
currentPositionX = currentPositionY = 5;


// Imágenes para dar movimiento al personaje
const faceDown = ['top right', 'top right -96px', 'top right -48px'];
const faceUp = ['top 48px right', 'top 48px right -96px', 'top 48px right -48px'];
const faceRight = ['top 96px right', 'top 96px right -96px', 'top 96px right -48px'];
const faceLeft = ['top 144px right', 'top 144px right -96px', 'top 144px right -48px'];

// const faceDown = [`top right `, `top right - $ {2 * heroSize}px `, `top right - $ {  heroSize}px `];
// const faceUp = [`top $ {  heroSize}px right `, `top $ {  heroSize}px right - $ {  2 * heroSize}px `, `top $ {  heroSize}px right - $ {  heroSize}px `];
// const faceRight = [`top $ {  2 * heroSize}px right `, `top $ {  2 * heroSize}px right -$ {  2 * heroSize}px `, `top $ {  2 * heroSize}px right - $ {  heroSize}px `];
// const faceLeft = [`top $ {  3 * heroSize}px right `, `top $ {  3 * heroSize}px right -${  2 * heroSize}px `, `top $ {  3 * heroSize}px right - $ {  heroSize}px `];


// ---- MOVIMIENTOS
const heroMoveUp = () => {
  // currentPositionX = hero.offsetLeft;
  currentPositionY = hero.offsetTop;
  if (currentPositionY <= heroStepSize) {
    return;
  } else {
    audioSteps.currentTime = 0;
    audioSteps.play();
    hero.style.top = currentPositionY - heroStepSize + 'px';
    hero.style.backgroundPosition = faceUp;

    setTimeout(function() {
      currentPositionY = hero.offsetTop;
      console.log('x: ' + currentPositionX + ', y: ' + currentPositionY);
    }, 600);

    if (moveIconUp === -1) {
      moveIconUp = 1;
    }
    setTimeout(function() {
      hero.style.backgroundPosition = faceUp[2];
    }, 300);
    hero.style.backgroundPosition = faceUp[moveIconUp];
    moveIconUp -= 1;
  }
};

const heroMoveDown = () => {
  limitBottom = (dungeon.offsetHeight - heroStepSize - 48);
  // currentPositionX = hero.offsetLeft;
  currentPositionY = hero.offsetTop;
  if (currentPositionY >= limitBottom) {
    objectives['Reach bottom edge'] = 'YES';
    checkObjectives();
    return;
  } else {
    audioSteps.currentTime = 0;
    audioSteps.play();
    hero.style.top = currentPositionY + heroStepSize + 'px';
    setTimeout(function() {
      currentPositionY = hero.offsetTop;
      console.log('x: ' + currentPositionX + ', y: ' + currentPositionY);

    }, 600);

    if (moveIconDown === -1) {
      moveIconDown = 1;
    }
    setTimeout(function() {
      hero.style.backgroundPosition = faceDown[2];
    }, 300);
    hero.style.backgroundPosition = faceDown[moveIconDown];
    moveIconDown -= 1;
  }
};

const heroMoveRight = () => {
  limitRight = (dungeon.offsetWidth - heroStepSize - 48);
  currentPositionX = hero.offsetLeft;
  // currentPositionY = hero.offsetTop;
  if (currentPositionX >= limitRight) {
    objectives['Reach right edge'] = 'YES';
    checkObjectives();
    return;
  } else {
    audioSteps.currentTime = 0;
    audioSteps.play();
    hero.style.left = currentPositionX + heroStepSize + 'px';
    hero.style.backgroundPosition = faceRight;

    if (moveIconRight === -1) {
      moveIconRight = 1;
    }
    setTimeout(function() {
      hero.style.backgroundPosition = faceRight[2];
    }, 300);
    hero.style.backgroundPosition = faceRight[moveIconRight];
    currentPositionX = hero.offsetLeft;
    console.log('x: ' + currentPositionX + ', y: ' + currentPositionY);
    moveIconRight -= 1;
  }
};

const heroMoveLeft = () => {
  currentPositionX = hero.offsetLeft;
  // currentPositionY = hero.offsetTop;
  if (currentPositionX <= heroStepSize) {
    return;
  } else {
    audioSteps.currentTime = 0;
    audioSteps.play();
    hero.style.left = currentPositionX - heroStepSize + 'px';
    hero.style.backgroundPosition = faceLeft;

    if (moveIconLeft === -1) {
      moveIconLeft = 1;
    }
    setTimeout(function() {
      hero.style.backgroundPosition = faceLeft[2];
    }, 300);
    hero.style.backgroundPosition = faceLeft[moveIconLeft];
    currentPositionX = hero.offsetLeft;
    console.log('x: ' + currentPositionX + ', y: ' + currentPositionY);
    moveIconLeft -= 1;
  }
};

// Función que mover de acuerdo con las teclas
const keys = event => {
  if (event.key === 's' || event.key === 'ArrowDown') {
    heroMoveDown();
  }
  if (event.key === 'w' || event.key === 'ArrowUp') {
    heroMoveUp();
  }
  if (event.key === 'd' || event.key === 'ArrowRight') {
    heroMoveRight();
  }
  if (event.key === 'a' || event.key === 'ArrowLeft') {
    heroMoveLeft();
  }
};


// EventListener para captar las teclas
window.addEventListener('keydown', keys);


const moveButtons = document.querySelectorAll('.button__move');

const moveByConsole = event => {
  const buttonClicked = event.currentTarget;

  buttonClicked.firstChild.classList.add('move-active');
  setTimeout(function() {
    buttonClicked.firstChild.classList.remove('move-active');
  }, 500);

  if (buttonClicked.classList.contains('move--up')) {
    heroMoveUp();
  } else if (buttonClicked.classList.contains('move--down')) {
    heroMoveDown();
  } else if (buttonClicked.classList.contains('move--left')) {
    heroMoveLeft();
  } else if (buttonClicked.classList.contains('move--right')) {
    heroMoveRight();
  }
};

moveButtons.forEach(moveButton => {
  moveButton.addEventListener('click', moveByConsole);
});

'use strict';


const dungeon = document.querySelector(".dungeon");


let limitRight = dungeon.offsetWidth;
let limitBottom = dungeon.offsetHeight;

console.log("Playable area: " + limitRight + " x " + limitBottom);

// objects

//# sourceMappingURL=main.min.js.map
